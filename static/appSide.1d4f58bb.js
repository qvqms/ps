import{u as e,r as l,P as a,e as s,C as o,J as t,a as d,b as u,B as r,h as n,d as i,Y as c,L as m,l as p,g as v,t as w,U as h,Z as f,c as k,j as x,k as g,W as V,i as y,v as b,X as _,$ as j}from"./index.adfd1ee8.js";import{e as C}from"./rsa.974b2d5e.js";import{a as U}from"./plugin.eade21b7.js";const S={class:"userlogin"},M={key:0,class:"-mt-3 login"},F={class:"input_div"},L={class:"flex justify-between mt-2"},z={class:"mt-4 flex"},E={key:1,class:"-mt-3 register"},O={class:"input_div"},q={class:"flex justify-between mt-2"},H={class:"mt-4 flex"},I={key:2,class:"-mt-3 register"},K={class:"input_div"},P={class:"flex justify-between mt-2"},B={class:"mt-4 flex"},R={__name:"userLogin",setup(x){const g=e(),V=l(1),y=l(60),b=l(!1),_=a({username:"",password:""}),j=a({username:"",password:"",code:""}),U=a({username:"",password:"",code:""}),R=()=>{h({url:"/user/forgetPass",method:"post",data:{username:C(U.username),password:C(U.password),code:U.code}}).then((e=>{1==e.code?(_.username=U.username,_.password=U.password,f.success("重置成功,已为您自动登录"),J()):f.error(e.msg)}))},A=()=>{h({url:"/user/register",method:"post",data:{username:C(j.username),password:C(j.password),code:j.code}}).then((e=>{1==e.code?(_.username=j.username,_.password=j.password,f.success("从现在起你就是我的主人了,已为您自动登录"),J()):f.error(e.msg)}))},J=()=>{h({url:"/user/login",method:"post",data:{username:C(_.username),password:C(_.password)}}).then((e=>{1==e.code?(k.set("token",e.data.token).set("user_id",e.data.user_id),g.dispatch("loginIn"),b.value=!1):f.error(e.msg)}))},W=e=>{h({url:"/api/getMailCode",method:"post",data:{mail:C(e)}}).then((e=>{if(1==e.code){f.success(e.msg);let l=setInterval((()=>{y.value-=1,y.value<=0&&(clearInterval(l),y.value=60)}),1e3)}else f.error(e.msg)}))},X=(e=1)=>{V.value=e,b.value=!0};return s.on("openLogin",X),o((()=>{s.off("openLogin",X)})),(e,l)=>{const a=t("el-input"),s=t("el-button"),o=t("el-dialog");return d(),u("div",S,[r(o,{modelValue:b.value,"onUpdate:modelValue":l[14]||(l[14]=e=>b.value=e),"close-on-click-modal":!1,title:["用户登录","用户注册","重置密码"][V.value-1],width:"350px"},{default:n((()=>[1==V.value?(d(),u("div",M,[i("div",F,[r(a,{modelValue:_.username,"onUpdate:modelValue":l[0]||(l[0]=e=>_.username=e),placeholder:"请输入邮箱（用于数据同步和通知）",clearable:""},null,8,["modelValue"]),r(a,{modelValue:_.password,"onUpdate:modelValue":l[1]||(l[1]=e=>_.password=e),placeholder:"请输入6-18位密码",class:"mt-4","show-password":"",onKeyup:c(J,["enter"])},null,8,["modelValue","onKeyup"])]),i("div",L,[i("span",{class:"text-blue-400 hover",onClick:l[2]||(l[2]=e=>V.value=2)},"注册账号"),i("span",{class:"hover",onClick:l[3]||(l[3]=e=>V.value=3)},"忘记密码")]),i("div",z,[r(s,{class:"rounded-full bg-blue-400 w-full",type:"primary",onClick:J},{default:n((()=>[m(" 登录 ")])),_:1})])])):p("",!0),2==V.value?(d(),u("div",E,[i("div",O,[r(a,{modelValue:j.username,"onUpdate:modelValue":l[4]||(l[4]=e=>j.username=e),placeholder:"请输入邮箱（用于数据同步和通知）",clearable:""},null,8,["modelValue"]),r(a,{modelValue:j.code,"onUpdate:modelValue":l[6]||(l[6]=e=>j.code=e),placeholder:"请输入验证码",class:"mt-4",clearable:""},{append:n((()=>[60==y.value?(d(),v(s,{key:0,onClickOnce:l[5]||(l[5]=e=>W(j.username))},{default:n((()=>[m("获取")])),_:1})):(d(),v(s,{key:1},{default:n((()=>[m(w(y.value)+"s",1)])),_:1}))])),_:1},8,["modelValue"]),r(a,{modelValue:j.password,"onUpdate:modelValue":l[7]||(l[7]=e=>j.password=e),placeholder:"请输入6-18位密码",class:"mt-4","show-password":"",onKeyup:c(J,["enter"])},null,8,["modelValue","onKeyup"])]),i("div",q,[i("span",{class:"text-blue-400 hover",onClick:l[8]||(l[8]=e=>V.value=1)},"已有账号去登录")]),i("div",H,[r(s,{class:"rounded-full bg-blue-400 w-full",type:"primary",onClick:A},{default:n((()=>[m(" 注册 ")])),_:1})])])):p("",!0),3==V.value?(d(),u("div",I,[i("div",K,[r(a,{modelValue:U.username,"onUpdate:modelValue":l[9]||(l[9]=e=>U.username=e),placeholder:"请输入邮箱",clearable:""},null,8,["modelValue"]),r(a,{modelValue:U.code,"onUpdate:modelValue":l[11]||(l[11]=e=>U.code=e),placeholder:"请输入验证码",class:"mt-4",clearable:""},{append:n((()=>[60==y.value?(d(),v(s,{key:0,onClickOnce:l[10]||(l[10]=e=>W(U.username))},{default:n((()=>[m("获取")])),_:1})):(d(),v(s,{key:1},{default:n((()=>[m(w(y.value)+"s",1)])),_:1}))])),_:1},8,["modelValue"]),r(a,{modelValue:U.password,"onUpdate:modelValue":l[12]||(l[12]=e=>U.password=e),placeholder:"请输入6-18位密码",class:"mt-4","show-password":""},null,8,["modelValue"])]),i("div",P,[i("span",{class:"text-blue-400 hover",onClick:l[13]||(l[13]=e=>V.value=1)},"已有账号去登录")]),i("div",B,[r(s,{class:"rounded-full bg-blue-400 w-full",type:"primary",onClick:R},{default:n((()=>[m(" 提交 ")])),_:1})])])):p("",!0)])),_:1},8,["modelValue","title"])])}}},A={class:"linkEdit"},J={class:"grid grid-rows-1 grid-cols-5"},W={class:"space-y-4 col-span-3"},X={class:"col-span-2 ml-3"},Y=["src"],Z={class:"flex mt-3"},$={__name:"linkEdit",setup(a){const c=window.isMobile,p=l(!1),v=e(),w={id:"",name:"",src:"",url:"",size:"1x1",type:"icon"},h=l(Object.assign({},w)),f=e=>{1==e.code&&(h.value.src=e.url)},k=()=>{if(""==h.value.id)h.value.id="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var l=16*Math.random()|0;return("x"==e?l:3&l|8).toString(16)})),v.state.link.push(h.value);else{const e=v.state.link.findIndex((e=>e.id==h.value.id));v.state.link[e]=h.value}v.commit("updateLink",v.state.link),p.value=!1};return s.on("linkEdit",((e=!1)=>{h.value=Object.assign({},w),e&&(h.value=e),p.value=!0})),o((()=>{s.off("linkEdit".open)})),(e,l)=>{const a=t("el-input"),s=t("el-button"),o=t("el-upload"),w=t("el-dialog");return d(),u("div",A,[r(w,{modelValue:p.value,"onUpdate:modelValue":l[3]||(l[3]=e=>p.value=e),"close-on-click-modal":!1,width:x(c)?"350px":"600px",title:"编辑标签"},{default:n((()=>[i("div",J,[i("div",W,[i("div",null,[r(a,{modelValue:h.value.name,"onUpdate:modelValue":l[0]||(l[0]=e=>h.value.name=e),placeholder:"标签名称"},null,8,["modelValue"])]),i("div",null,[r(a,{modelValue:h.value.url,"onUpdate:modelValue":l[1]||(l[1]=e=>h.value.url=e),placeholder:"标签url"},{append:n((()=>[r(s,{type:"primary"},{default:n((()=>[m("获取图标")])),_:1})])),_:1},8,["modelValue"])]),i("div",null,[r(a,{modelValue:h.value.src,"onUpdate:modelValue":l[2]||(l[2]=e=>h.value.src=e),placeholder:"标签图标地址"},{append:n((()=>[r(o,{class:"upload-demo","show-file-list":!1,"on-success":f,action:x(v).state.site.upload},{default:n((()=>[r(s,{type:"primary"},{default:n((()=>[m("上传")])),_:1})])),_:1},8,["action"])])),_:1},8,["modelValue"])])]),i("div",X,[i("img",{src:h.value.src,class:"w-9/12 rounded-2xl"},null,8,Y)])]),i("div",Z,[r(s,{class:"ml-auto bg-blue-400",type:"primary",onClick:g(k,["stop"])},{default:n((()=>[m("保存")])),_:1},8,["onClick"])])])),_:1},8,["modelValue","width"])])}}};const D={key:0,class:"framer"},G={class:"flex justify-end"},N=[i("svg",{width:"24",height:"24",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[i("path",{d:"M33 6H42V15",stroke:"var(--framerSvg)","stroke-width":"4","stroke-linecap":"round","stroke-linejoin":"round"}),i("path",{d:"M42 33V42H33",stroke:"var(--framerSvg)","stroke-width":"4","stroke-linecap":"round","stroke-linejoin":"round"}),i("path",{d:"M15 42H6V33",stroke:"var(--framerSvg)","stroke-width":"4","stroke-linecap":"round","stroke-linejoin":"round"}),i("path",{d:"M6 15V6H15",stroke:"var(--framerSvg)","stroke-width":"4","stroke-linecap":"round","stroke-linejoin":"round"})],-1)],Q=[i("svg",{width:"24",height:"24",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[i("path",{d:"M8 8L40 40",stroke:"var(--framerSvg)","stroke-width":"4","stroke-linecap":"round","stroke-linejoin":"round"}),i("path",{d:"M8 40L40 8",stroke:"var(--framerSvg)","stroke-width":"4","stroke-linecap":"round","stroke-linejoin":"round"})],-1)],T={class:"componentView"},ee={__name:"framer",setup(e){const a=l(!1),c=l(!0);let m=!1;const w=l(null);let h={width:"800px",height:"500px"};const f=()=>{if(0==m){const e=document.querySelector(".framerAlert");(e.requestFullscreen||e.mozRequestFullScreen||e.webkitRequestFullscreen||e.msRequestFullscreen).call(e),m=!0}else{(document.exitFullScreen||document.mozCancelFullScreen||document.webkitExitFullscreen||document.msExitFullscreen).call(document),m=!1}},k=l(Object.assign({},h)),C=V(U.note),S=e=>{const{full:l=!0}=e;c.value=l;const{size:s=!1}=e;s?(k.value.width=s.width,k.value.height=s.height):k.value=Object.assign({},h),j("--frameHeight",k.value.height),C.value=U[e.component],a.value=!0},M=()=>{a.value=!1},F=e=>{a.value=!1,e()};return s.on("openPlugin",S),o((()=>{s.off("openPlugin",S)})),(e,l)=>{const s=t("el-dialog");return a.value?(d(),u("div",D,[r(s,{modelValue:a.value,"onUpdate:modelValue":l[1]||(l[1]=e=>a.value=e),"append-to-body":"","show-close":!1,"close-on-click-modal":!1,width:k.value.width,"before-close":F,class:"framerAlert",ref_key:"framers",ref:w,draggable:""},{header:n((()=>[i("div",G,[y(i("div",{size:"30px",class:"cursor-pointer windowController windowfull",onClick:f,onMousemove:l[0]||(l[0]=g((()=>{}),["stop"])),title:"全屏"},N,544),[[b,c.value]]),i("div",{size:"30px",class:"cursor-pointer windowController windowclose",onClick:M,title:"关闭窗口"},Q)])])),default:n((()=>[i("div",T,[(d(),v(_(x(C))))])])),_:1},8,["modelValue","width"])])):p("",!0)}}};const le={class:"appSide"},ae={__name:"appSide",setup:l=>(e(),(e,l)=>(d(),u("div",le,[r(R),r($),r(ee)])))};export{ae as default};
